@{
    ViewBag.Title = "PaymentTaggingSearch";
    Layout = "~/Views/Shared/_LayoutDesignMaster.cshtml";
}

<script src="~/js/PaymentTagging/PaymentTaggingSearch.js"></script>
<script src="~/js/master/common.master.js"></script>
<link href="~/Content/datepicker3.min.css" rel="stylesheet" />
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker3.min.css" />
<script src="~/js/common/TopSearch.js"></script>

<div class="container-fluid">
    <div class="row">

        <div class="col-md-12">
            <div class="main-title">
                <h1>
                    Payment Information Search
                    @Html.Partial("pagedate")
                </h1>
            </div>
        </div>



        <form id="PaymentTagging_Search" name="userForm" class=" form-horizontal" ng-submit="PaymentTaggingSearchForm()" ng-show="ShowSearchForm" novalidate ng-cloak>


            <div class="col-md-12">
                <div class="portlet box green">
                    <div class="portlet-title">
                        <div class="caption">
                            Payment Information Search
                        </div>
                        <div class="tools">
                            <a href="javascript:;" class="collapse"> </a>
                        </div>
                    </div>
                    <div class="portlet-body form">
                        <div class="form-body">
                            <div class=" row">
                                <div class="col-md-6">


                                    <div>
                                        <label class="control-label col-md-5"> ISBN</label>
                                        <div class="col-md-7">
                                            <div class="form-group" ng-class="{ 'has-error' : userForm.OUPISBN.$invalid && (userForm.OUPISBN.$dirty || submitted)}">
                                                <input type="text" name="OUPISBN" class="form-control" ng-model="OUPISBN" ng-pattern="/^[0-9]{13}$/" placeholder=" ISBN" maxlength="13">
                                                <div class="help-block">
                                                    <p ng-show="userForm.OUPISBN.$error.pattern" class="help-block red">Please enter valid ISBN</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="control-label col-md-5">Working Product</label>
                                        <div class="col-md-7">
                                            <div class="form-group" ng-class="{ 'has-error' : userForm.WorkingProduct.$invalid && (userForm.WorkingProduct.$dirty || submitted)}">
                                                <input type="text" name="WorkingProduct" class="form-control" ng-model="WorkingProduct" ng-pattern="/^[a-zA-Z'.\s]/" placeholder="Working Product">

                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="control-label col-md-5">Author</label>
                                        <div class="col-md-7">
                                            <div class="form-group">
                                                <input type="text" name="Authors" class="form-control" ng-model="Authors" placeholder="Authors">
                                            </div>
                                        </div>

                                    </div>

                                    <div>
                                        <label class="control-label col-md-5">Author SAP Code</label>
                                        <div class="col-md-7">
                                            <div class="form-group">
                                                <input type="text" name="AuthorsSAPCode" class="form-control" ng-model="AuthorSAPCode" placeholder="Author SAP Code"
                                                       maxlength="6" ng-pattern="/^[0-9]*$/">
                                            </div>
                                        </div>

                                    </div>

                                    <div class=" row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="col-md-6">

                                                    <label class="radio-inline" style="padding-top: 0px !important;">
                                                        <input type="radio" name="ContractCodeOrLicenseCode " ng-model="ContractCodeOrLicenseCodeChk" ng-click="func_ContractCodeChk()" value="AuthorContractCode" @*required*@> Contract Code
                                                    </label>

                                                </div>
                                                <div class="col-md-6">

                                                    <label class="radio-inline" style="padding-top: 0px !important;">
                                                        <input type="radio" name="ContractCodeOrLicenseCode " ng-model="ContractCodeOrLicenseCodeChk" ng-click="func_LicenseCodeChk()" value="ProductLicenseCode" @*required*@> Product License Code
                                                    </label>
                                                </div>

                                                <div ng-class="{ 'has-error' : userForm.ContractCodeOrLicenseCode .$invalid && (userForm.ContractCodeOrLicenseCode .$dirty || submitted)}">
                                                    <div class="help-block">
                                                        <p ng-show="userForm.ContractCodeOrLicenseCode .$error.required && (userForm.ContractCodeOrLicenseCode.$dirty || submitted)" class="help-block">Please select one of these </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row" ng-show="ReqAuthorContractCode">
                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">Contract Code</label>
                                            <div class="col-md-7">
                                                <div class="form-group" ng-class="{ 'has-error': ( submitted ||userForm.AuthorContractCode.$dirty) && userForm.AuthorContractCode.$invalid } ">
                                                    <input type="text" name="AuthorContractCode" class="form-control" @*ng-required="ReqAuthorContractCode&&!AuthorCode"*@ ng-model="AuthorContractCode" placeholder="Contract Code">


                                                    <div class="help-block">

                                                        <p ng-show="userForm.AuthorContractCode.$error.required && (userForm.AuthorContractCode.$dirty || submitted)" class="help-block red">Please enter contract code </p>

                                                    </div>



                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">Author Code</label>
                                            <div class="col-md-7">
                                                <div class="form-group" ng-class="{ 'has-error': ( submitted ||userForm.AuthorCode.$dirty) && userForm.AuthorCode.$invalid } ">
                                                    <input type="text" name="AuthorCode" class="form-control" @*ng-required="ReqAuthorContractCode&&!AuthorContractCode"*@ ng-model="AuthorCode" placeholder="Author Code">


                                                    <div class="help-block">

                                                        <p ng-show="userForm.AuthorCode.$error.required && (userForm.AuthorCode.$dirty || submitted)" class="help-block red">Please enter author code </p>

                                                    </div>



                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row" ng-show="ReqPublishingCompanyCode">
                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">Product License Code</label>
                                            <div class="col-md-7">
                                                <div class="form-group" ng-class="{ 'has-error': ( submitted ||userForm.ProductLicenseCode.$dirty) && userForm.ProductLicenseCode.$invalid } ">
                                                    <input type="text" name="ProductLicenseCode" class="form-control" @*ng-required="ReqPublishingCompanyCode&&!PublishingCompanyCode"*@ ng-model="ProductLicenseCode" placeholder="Product License Code">


                                                    <div class="help-block">

                                                        <p ng-show="userForm.ProductLicenseCode.$error.required && (userForm.ProductLicenseCode.$dirty || submitted)" class="help-block red">Please enter product license code </p>

                                                    </div>



                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">Publishing Company Code</label>
                                            <div class="col-md-7">
                                                <div class="form-group" ng-class="{ 'has-error': ( submitted ||userForm.PublishingCompanyCode.$dirty) && userForm.PublishingCompanyCode.$invalid } ">
                                                    <input type="text" name="PublishingCompanyCode" class="form-control" @*ng-required="ReqPublishingCompanyCode&&!ProductLicenseCode"*@ ng-model="PublishingCompanyCode" placeholder="Publishing Company Code">


                                                    <div class="help-block">

                                                        <p ng-show="userForm.PublishingCompanyCode.$error.required && (userForm.PublishingCompanyCode.$dirty || submitted)" class="help-block red">Please enter publishing company code </p>

                                                    </div>



                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <div class="col-md-6">

                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>



            <div class="col-md-12">
                <div class="form-actions">
                    <div class="row">
                        <div class="col-md-12 text-center">
                            <input type="hidden" value="@TempData["For"]" ng-model="hid_For" id="hid_For" name="hid_For">
                            <input type="hidden" value="@Session["UserDepartment"]" ng-model="hid_User" id="hid_User" name="hid_User">
                            <input type="hidden" ng-model="hid_BackToSearch" id="hid_BackToSearch" name="hid_BackToSearch" value="@TempData["BackToSearch"]" />
                            <input type="hidden" ng-model="hid_Dashboard" id="hid_Dashboard" name="hid_Dashboard" value="@TempData["Dashboard"]" />
                            <button type="submit" class="btn green" id="btnSubmit">Search</button>
                        </div>
                    </div>
                </div>
            </div>

        </form>



        <form name="Serch" class="form-horizontal" id="search" ng-show="ShowListForm">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 backtoSearch" ng-show="btn_backToSearch">
                        <div class="tools">
                            <span class="back-to-search" ng-click="BackToserch()"> Back To Search </span>
                        </div>
                    </div>

                    <div class="col-md-12 backtoDashboard"  ng-show="btn_backToDashboard">
                        <div class="tools">
                            <span class="back-to-search" ng-click="BackToserch()"> Back To Dashboard </span>
                        </div>
                    </div>


                    <div class="col-md-12">
                        <div class="portlet box green">
                            <div class="portlet-title">
                                <div class="caption">
                                    @if (ViewBag.Report == "report")
                                    {
                                        <span ng-if="'@TempData["For"]'=='Rights'">Rights Selling Report </span>
                                        <span ng-if="'@TempData["For"]'=='PermissionOutbound'">Permission Outbound Report </span>
                                    }
                                    else
                                    {
                                        <span ng-if="'@TempData["For"]'=='Rights'">Rights Selling {{(ShowSearchForm ? "Search" :"Listing")}}</span>
                                        <span ng-if="'@TempData["For"]'=='PermissionOutbound'">Permission Outbound {{(ShowSearchForm ? "Search" :"Listing")}}</span>
                                    }
                                </div>
                                <div class="tools">
                                    <a href="javascript:;" class="collapse"> </a>
                                </div>
                            </div>
                            <div class="portlet-body flip-scroll">
                                <div class="row">
                                    <div class="col-md-12">
                                        &nbsp;
                                    </div>
                                </div>
                                <div class="">
                                    <table datatable="ng" class="table table-bordered table-striped table-condensed flip-content">
                                        <thead class="flip-content">
                                            <tr>
                                                <th>SNo</th>
                                                <th ng-if="'@TempData["For"]'=='Rights'">Rights Sales Code &nbsp;<span class="glyphicon glyphicon-sort"></span></th>
                                                <th ng-if="'@TempData["For"]'=='PermissionOutbound'">Outbound Code &nbsp;<span class="glyphicon glyphicon-sort"></span></th>
                                                <th>Product Code &nbsp;<span class="glyphicon glyphicon-sort"></span></th>
                                                <th>ISBN &nbsp;<span class="glyphicon glyphicon-sort"></span></th>
                                                <th>Working Product &nbsp;<span class="glyphicon glyphicon-sort"></span></th>
                                                <th>Author Name &nbsp;<span class="glyphicon glyphicon-sort"></span></th>
                                                <th>Contract Code &nbsp;<span class="glyphicon glyphicon-sort"></span></th>
                                                <th>License Code &nbsp;<span class="glyphicon glyphicon-sort"></span></th>
                                                <th>Agreement Date &nbsp;<span class="glyphicon glyphicon-sort"></span></th>
                                                <th>Expiry Date &nbsp;<span class="glyphicon glyphicon-sort"></span></th>
                                                @*<th>Licensee Code  &nbsp;<span class="glyphicon glyphicon-sort"></span></th>*@
                                                <th>Licensee Name  &nbsp;<span class="glyphicon glyphicon-sort"></span></th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            <tr ng-repeat="obj in Data" class="tooltipclass">

                                                <td><span ng-bind="$index + 1"></span></td>
                                              
                                                @*<td ng-if="'@TempData["For"]'=='Rights'" ng-show="!(obj.ProductLicenseId==null)"><a href="~/RightsSelling/RightsSelling/RightsSellingView?Id={{obj.ProductLicenseId}}&type=P{{obj.ProuductId}}&RightsSellingId={{obj.Id}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.Code"></span></a></td>
                                                <td ng-if="'@TempData["For"]'=='Rights'" ng-show="obj.ProductLicenseId==null"><a href="~/RightsSelling/RightsSelling/RightsSellingView?Id={{obj.ContractId}}&type=A{{obj.ProuductId}}&RightsSellingId={{obj.Id}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.Code"></span></a></td>
                                                <td ng-if="'@TempData["For"]'=='PermissionOutbound'" ng-show="!(obj.ProductLicenseId==null)"><a href="~/PermissionsOutbound/PermissionsOutbound/PermissionsOutboundMaster?Id={{obj.ProductLicenseId}}&type={{obj.Type}}{{obj.ProuductId}}&OutboundView={{obj.Id}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.Code"></span></a></td>
                                                <td ng-if="'@TempData["For"]'=='PermissionOutbound'" ng-show="obj.ProductLicenseId==null"><a href="~/PermissionsOutbound/PermissionsOutbound/PermissionsOutboundMaster?Id={{obj.ContractId}}&type={{obj.Type}}{{obj.ProuductId}}&OutboundView={{obj.Id}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.Code"></span></a></td>*@

                                                <td ng-if="'@TempData["For"]'=='Rights'">
                                                    <a ng-show="!(obj.ProductLicenseId==null)" href="~/RightsSelling/RightsSelling/RightsSellingView?Id={{obj.ProductLicenseId}}&type=P{{obj.ProuductId}}&RightsSellingId={{obj.Id}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.Code"></span></a>
                                                    <a ng-show="obj.ProductLicenseId==null" href="~/RightsSelling/RightsSelling/RightsSellingView?Id={{obj.ContractId}}&type=A{{obj.ProuductId}}&RightsSellingId={{obj.Id}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.Code"></span></a>
                                                </td>
                                              
                                                <td ng-if="'@TempData["For"]'=='PermissionOutbound'" >
                                                    <a ng-show="!(obj.ProductLicenseId==null)" href="~/PermissionsOutbound/PermissionsOutbound/PermissionsOutboundMaster?Id={{obj.ProductLicenseId}}&type={{obj.Type}}{{obj.ProuductId}}&OutboundView={{obj.Id}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.Code"></span></a>
                                                    <a ng-show="obj.ProductLicenseId==null" href="~/PermissionsOutbound/PermissionsOutbound/PermissionsOutboundMaster?Id={{obj.ContractId}}&type={{obj.Type}}{{obj.ProuductId}}&OutboundView={{obj.Id}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.Code"></span></a>
                                                </td>
                                             
                                                <td><a href="~/Product/ProductMaster/ProductDetailsView?Id={{obj.ProuductId}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.ProductCode"></span></a></td>
                                                <td><span ng-bind="obj.ISBN"></span></td>
                                                <td><span ng-bind="obj.WorkingProduct"></span> <br /> <span style="font-size:11px;"> <span ng-bind="obj.WorkingSubProduct"></span></span></td>
                                                <td><span ng-bind="obj.AuthorName"></span></td>

                                                @*<td ng-if="'@TempData["For"]'=='Rights'" ng-show="obj.AuthorContractCode=='--'"><span ng-bind="obj.AuthorContractCode"></span></td>
                                                <td ng-if="'@TempData["For"]'=='Rights'" ng-show="obj.ProductLicenseId==null"><a href="~/Contract/AuthorContract/view?Id={{obj.ContractId}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.AuthorContractCode"></span></a></td>
                                                <td ng-if="'@TempData["For"]'=='Rights'" ng-show="obj.ProductLicensecode=='--'"><span ng-bind="obj.ProductLicensecode"></span></td>
                                                <td ng-if="'@TempData["For"]'=='Rights'" ng-show="!(obj.ProductLicenseId==null)"><a href="~/Product/ProductLicense/view?Id={{obj.ProductLicenseId}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.ProductLicensecode"></span></a></td>

                                                <td ng-if="'@TempData["For"]'=='PermissionOutbound'" ng-show="obj.AuthorContractCode=='--'"><span ng-bind="obj.AuthorContractCode"></span></td>
                                                <td ng-if="'@TempData["For"]'=='PermissionOutbound'" ng-show="obj.ProductLicenseId==null"><a href="~/Contract/AuthorContract/view?Id={{obj.ContractId}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.AuthorContractCode"></span></a></td>
                                                <td ng-if="'@TempData["For"]'=='PermissionOutbound'" ng-show="obj.ProductLicensecode=='--'"><span ng-bind="obj.ProductLicensecode"></span></td>
                                                <td ng-if="'@TempData["For"]'=='PermissionOutbound'" ng-show="!(obj.ProductLicenseId==null)"><a href="~/Product/ProductLicense/view?Id={{obj.ProductLicenseId}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.ProductLicensecode"></span></a></td>*@

                                                @*<td ng-if="'@TempData["For"]'=='Rights'" >                                                
                                                    <span ng-show="obj.AuthorContractCode=='--'" ng-bind="obj.AuthorContractCode"></span>
                                                    <a ng-show="obj.ProductLicenseId==null" href="~/Contract/AuthorContract/view?Id={{obj.ContractId}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.AuthorContractCode"></span></a>
                                                    <span ng-show="obj.ProductLicensecode=='--'" ng-bind="obj.ProductLicensecode"></span>
                                                    <a ng-show="!(obj.ProductLicenseId==null)" href="~/Product/ProductLicense/view?Id={{obj.ProductLicenseId}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.ProductLicensecode"></span></a>
                                                </td>

                                                <td ng-if="'@TempData["For"]'=='PermissionOutbound'" >
                                                    <span ng-show="obj.AuthorContractCode=='--'" ng-bind="obj.AuthorContractCode"></span>
                                                    <a ng-show="obj.ProductLicenseId==null" href="~/Contract/AuthorContract/view?Id={{obj.ContractId}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.AuthorContractCode"></span></a>
                                                    <span ng-show="obj.ProductLicensecode=='--'" ng-bind="obj.ProductLicensecode"></span>
                                                    <a ng-show="!(obj.ProductLicenseId==null)" href="~/Product/ProductLicense/view?Id={{obj.ProductLicenseId}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.ProductLicensecode"></span></a>
                                                </td>*@

                                                <td>
                                                    <a ng-if="!(obj.ContractId==null)" href="~/Contract/AuthorContract/view?Id={{obj.ContractId}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.AuthorContractCode"></span></a>
                                                    <span ng-if="(obj.ContractId==null)" ng-bind="obj.AuthorContractCode"></span>
                                                </td>

                                                <td>
                                                    <a ng-if="!(obj.ProductLicenseId==null)" href="~/Product/ProductLicense/view?Id={{obj.ProductLicenseId}}" style="color: #ee5941;" target="_blank"><span ng-bind="obj.ProductLicensecode"></span></a>
                                                    <span ng-if="(obj.ProductLicenseId==null)" ng-bind="obj.ProductLicensecode"></span>
                                                </td>

                                                @*<td><span ng-bind="obj.Date_of_agreement "></span></td>
                                                <td><span ng-bind="obj.Expirydate"></span></td>*@  
                                                
                                                
                                                <td><span class="sortDateHide" ng-bind="obj.Date_of_agreementSort"></span>{{obj.Date_of_agreement}}</td>
                                                <td><span class="sortDateHide" ng-bind="obj.ExpirydateSort"></span>{{obj.Expirydate}}</td>

                                                
                                                                      
                                                @*<td><span ng-bind="obj.Licenseecode "></span></td>*@
                                                <td><span ng-bind="obj.OrganizationName "></span></td>

                                                <td ng-hide="TitleLinking">
                                                    <div class="tooltip-container">
                                                        <input type="checkbox" class="tooltip-toggle" id="tooltip-toggle">
                                                      
                                                        <label for="tooltip-toggle" onclick="fireMe($(this))" class="tooltip-btn customizeLink">
                                                            Action
                                                        </label>
                                                        <label for="tooltip-toggle" class="tooltip-backdrop"></label>
                                                        <div class="tooltip-content">
                                                            <div class="linking">
                                                                <ul>
                                                                    <li ng-if="'@TempData["For"]'=='Rights'" ng-show="obj.ProductLicenseId==null"><a href="~/RightsSelling/RightsSelling/RightsSellingPaymentTagging?AuthorContractId={{obj.ContractId}}&RightsSellingId={{obj.Id}}&ProuductId={{obj.ProuductId}}" style="color: #ee5941;">Enter Payment Details</a></li>
                                                                    <li ng-if="'@TempData["For"]'=='Rights'" ng-show="!(obj.ProductLicenseId==null)"><a href="~/RightsSelling/RightsSelling/RightsSellingPaymentTagging?ProductLicenseId={{obj.ProductLicenseId}}&RightsSellingId={{obj.Id}}&ProuductId={{obj.ProuductId}}" style="color: #ee5941;">Enter Payment Details</a></li>
                                                                    <li ng-if="'@TempData["For"]'=='PermissionOutbound'" ng-show="obj.ProductLicenseId==null"><a href="~/PermissionsOutbound/PermissionsOutbound/PermissionsOutboundPaymentTagging?AuthorContractId={{obj.ContractId}}&OutboundId={{obj.Id}}&ProuductId={{obj.ProuductId}}" style="color: #ee5941;">Enter Payment Details</a></li>
                                                                    <li ng-if="'@TempData["For"]'=='PermissionOutbound'" ng-show="!(obj.ProductLicenseId==null)"><a href="~/PermissionsOutbound/PermissionsOutbound/PermissionsOutboundPaymentTagging?ProductLicenseId={{obj.ProductLicenseId}}&OutboundId={{obj.Id}}&ProuductId={{obj.ProuductId}}" style="color: #ee5941;">Enter Payment Details</a></li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>

                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </form>


    </div>
</div>

<script type="text/javascript">
    function fireMe(obj) {
        var length = $(".customizeLink").length;
        for (i = 0; i < $(".customizeLink").length; i++) {
            $($(".customizeLink")[i]).attr("sequence", i);
        }
        angular.element(document.getElementById('angularid')).scope().DisplayDiv(parseInt($(obj).attr("sequence")) + 1);
    };



</script>

