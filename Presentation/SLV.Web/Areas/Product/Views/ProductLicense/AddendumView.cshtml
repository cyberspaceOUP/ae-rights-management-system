
@{
    ViewBag.Title = "AddendumView";
    Layout = "~/Views/Shared/_LayoutDesignMaster.cshtml";
}
<script src="~/js/Product/AddendumView.js"></script>
<script src="~/js/master/common.master.js"></script>
<script src="~/js/common/TopSearch.js"></script>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <div class="main-title">
                <h1>
                    Addendum Details <span ng-bind="(PageMode =='Y'?'Update' :'View')"></span>
                    @Html.Partial("pagedate")</h1>
            </div>
        </div>

        <div class="col-md-12 text-right" ng-if="'@TempData["BackToserach"]' == 'BackToserach'">
            <div class="tools">
                <a href="~/Product/ProductLicense/ProductLicenseSearch?For=BackToserach" style="color:black;">Back To List</a>
            </div>
        </div>

        <form name="userForm" class=" form-horizontal" ng-submit="AddendumDocEntry(ProductModel)" novalidate>
            <div class="col-md-12">
                <div class="portlet-body form">
                    <div class="form-body">
                        @Html.Partial("~/Areas/Product/Views/Shared/_ProductDetails.cshtml")

                        <!--Kit Details List-->
                        <div ng-if="KitISBNDetailsList.length">
                            @Html.Partial("~/Areas/Product/Views/Shared/_KitISBNList.cshtml")
                        </div>  

                        <input type="hidden" value="@ViewBag.LicenseId" ng-model="ProductModel.ProductLicenseId" ng-init="ProductModel.ProductLicenseId = @ViewBag.LicenseId" id="hid_licenseId" name="hid_licenseId">
                        <input type="hidden" value="@ViewBag.AddendumId" ng-model="ProductModel.AddendumId" ng-init="ProductModel.AddendumId = @ViewBag.AddendumId" id="hid_AddendumId" name="hid_AddendumId">
                        <input type="hidden" value="@ViewBag.UpdateMode" ng-model="ProductModel.AddendumId" ng-init="UpdateMode = @ViewBag.UpdateMode" id="hid_UpdateMode" name="hid_UpdateMode">
                    </div>
                </div>
            </div>
            <div class="col-md-12">
                <div class="portlet-body form">
                    <div class="form-body">
                        @Html.Partial("~/Areas/Product/Views/Shared/_ProductLicenseDetails.cshtml")
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <div class="portlet-body form">
                    <div class="form-body">
                        @Html.Partial("~/Areas/Product/Views/Shared/_ProductLicenseAddendumDetails.cshtml")
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <div class="portlet box green">
                    <div class="portlet-title">
                        <div class="caption">
                            Addendum Details
                        </div>
                        <div class="tools">
                            <a href="javascript:;" class="collapse"> </a>
                        </div>
                    </div>
                    <div class="portlet-body form">
                        <div class="form-body">
                            <div class=" row">
                                <div class="col-md-6">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">Addendum Date</label>
                                            <div class="col-md-7">
                                                <div class="form-group">
                                                    <span ng-bind="ProductModel.AddendumDate"></span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">Addendum Type</label>
                                            <div class="col-md-7">
                                                <div class="form-group">
                                                    <span ng-bind="ProductModel.AddendumType"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    @*<div class="row">
                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">Period of agreement</label>
                                            <div class="col-md-7">
                                                <div class="form-group">
                                                    <span ng-bind="ProductModel.Periodofagreement"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>*@
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">Expiry Date</label>
                                            <div class="col-md-7">
                                                <div class="form-group">
                                                    <span ng-bind="ProductModel.ExpiryDate"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">Remarks</label>
                                            <div class="col-md-7">
                                                <div class="form-group">
                                                    <span ng-bind="ProductModel.Remarks"></span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">First Impression Within Date</label>
                                            <div class="col-md-7">
                                                <div class="form-group">
                                                    <span ng-bind="ProductModel.FirstImpressionWithinDate"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">No of Impressions</label>
                                            <div class="col-md-7">
                                                <div class="form-group">
                                                    <span ng-bind="ProductModel.NoOfImpressions"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" ng-show="Checkprintquantitytype==true">
                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">Balance Quantity Carry Forward</label>
                                            <div class="col-md-7">
                                                <div class="form-group">
                                                    <span ng-bind="ProductModel.BalanceQuantityCarryForward"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" ng-show="Checkprintquantitytype==true">
                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">Additional Number of Copies</label>
                                            <div class="col-md-7">
                                                <div class="form-group" ng-show="ProductModel.AddendumQuantity !=0 && ProductModel.AddendumQuantity !=null">
                                                    <span ng-bind="ProductModel.AddendumQuantity"></span>
                                                </div>
                                                <div class="form-group" ng-show="ProductModel.AddendumQuantity ==null || ProductModel.AddendumQuantity ==0">
                                                    --
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <div class=" row">
                                        <div class="col-md-12">
                                            <label class="control-label col-md-5">Royalty Terms</label>
                                            <div class="col-md-7">
                                                <div class="form-group">
                                                    <span ng-bind="ProductModel.RoyaltyTerms"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" ng-show="AddendumId > 0 && PageMode== 'Y'">
                                <div class="col-md-12">
                                    <label class="control-label col-md-2">Uploaded Document</label>
                                    <div class="col-md-10" style="padding-left:45px;">
                                        <div id="fileuploadcontrol">

                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                &nbsp;
                                            </div>
                                        </div>
                                        @*<div id="doclistid" ng-show="documentshow" style=" padding-left: 29px;">
                                            <div class="panel panel-warning">
                                                <div class="panel-heading" style="background-color: #ee5941 !important; color: #FFF !important; ">
                                                    <h3 class="panel-title">Uploaded Attachment</h3>
                                                </div>
                                                <div class="tools">
                                                    <a href="javascript:;" class="collapse"> </a>
                                                </div>*@
                                        <div class="panel-body" ng-show="documentshow">
                                            <table class="table table-striped table-hover ">
                                                <thead>
                                                    <tr>
                                                        <th>S.No</th>
                                                        <th>Document Name</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="url in Docurl">
                                                        <td><span ng-bind="$index + 1"></span> <input type="hidden" name="DocId" value="{{url.Id}}" /></td>
                                                        <td><a href="~/uploads/{{url.UploadFileName}}" target="_blank" style="color: black;"><span ng-bind="url.FileName"></span></a></td>
                                                        <td><a style=" color: black; cursor:pointer;" ng-click="RemoveDocumentById(url)">Delete</a></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                            @*</div>
                                        </div>*@
                                    </div>
                                </div>
                            </div>
                            <div class="row" ng-hide="PageMode== 'Y'">
                                @*<div class="col-md-12" ng-show="documentshow">
                                    <div class="panel panel-warning">
                                        <div class="panel-heading" style="background-color: #ee5941 !important; color: #FFF !important; ">
                                            <h3 class="panel-title">Uploaded Attachments</h3>
                                        </div>
                                        <div class="tools">
                                            <a href="javascript:;" class="collapse"> </a>
                                        </div>*@
                                <div class="panel-body" ng-show="documentshow">
                                    <table class="table table-striped table-hover ">
                                        <thead>
                                            <tr>
                                                <th>S.No</th>
                                                <th>Document Name</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="url in Docurl">
                                                <td><span ng-bind="$index + 1"></span></td>
                                                <td><a href="~/uploads/{{url.UploadFileName}}" target="_blank" style="color: black;"><span ng-bind="url.FileName"></span></a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                    @*</div>
                                </div>*@
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12" ng-show="RoyalslabList.length > 0">
                <div class="portlet box green">
                    <div class="portlet-title">
                        <div class="caption">
                            Royalty Slab
                        </div>
                        <div class="tools">
                            <a href="javascript:;" class="collapse"> </a>
                        </div>
                    </div>
                    <div class="portlet-body form">
                        <div class="form-body">
                            <div class="portlet-body clearfix">
                                <div class="portlet-body flip-scroll">
                                    <table class="table table-striped table-bordered table-hover dataTable no-footer RoyaltySlab" id="TblOwnerList">
                                        <thead class="flip-content">
                                            <tr>
                                                <th>S No.</th>
                                                <th>Product Sub-Type</th>
                                                <th>Copies From</th>
                                                <th>Copies To</th>
                                                <th>Percentage (%)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="div in RoyalslabList">
                                                <td>
                                                    <span ng-bind="$index+1"></span>
                                                </td>
                                                <td>
                                                    <span ng-bind="div.AddendumRoyalityProductSubProduct.typeName"></span>
                                                </td>
                                                <td>
                                                    <span ng-bind="div.copiesfrom"></span>
                                                </td>
                                                <td>
                                                    <span ng-bind="div.copiesto"></span>
                                                </td>
                                                <td>
                                                    <span ng-bind="div.percentage"></span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12" ng-show="PageMode == 'Y'">
                <div class="form-actions">
                    <div class="row">
                        <div class="col-md-12 text-center">
                            <button type="submit" class="btn green" id="btnSubmit">Submit</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<script type="text/javascript">

    $(function () {
        renderFileUpload();

    });

    function renderFileUpload() {
        $.ajax({
            cache: false,
            type: "GET",
            contentType: 'application/html; charset=utf-8',
            url: GlobalredirectPath + "/Master/Master/MultipleFileUpload",
            data: {},
            datatype: 'html',
            success: function (result) {
                $("#fileuploadcontrol").html(result);

            },
            error: function (xhr, ajaxOptions, thrownError) {

            }
        });

    }

</script>